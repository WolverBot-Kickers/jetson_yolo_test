# Wolverbot Kickers Vision Stack Parameters
# Configuration file for YOLO detection and field masking

# YOLO Detection Node Parameters
yolo_node:
  ros__parameters:
    # Model configuration
    model_path: "train200epochs_best.engine"  # Path to YOLO model (.engine for TensorRT, .pt, or .onnx)
    imgsz: 416                    # Input image size (416 for Nano, 640 for Xavier/Orin)
    
    # Detection thresholds
    conf: 0.35                    # Confidence threshold
    nms_iou: 0.5                  # Non-Maximum Suppression IoU threshold
    max_det: 50                   # Maximum number of detections per image
    
    # ROS2 configuration
    img_topic: "/camera/image_raw" # Input image topic
    frame_id: "camera_optical_frame" # Frame ID for published messages
    
    # Class configuration (0=ball, 1=goalpost, 2=robot, 3=L_intersection, 4=T_intersection, 5=X_intersection)
    classes: [0, 1, 2, 3, 4, 5]   # Enable all classes for ILM paper support
    
    # Performance tuning
    enable_debug_image: true       # Publish debug image with drawn boxes
    
    # Class-specific settings
    class_names:
      0: "ball"
      1: "goalpost"
      2: "robot"
      3: "L_intersection"
      4: "T_intersection"
      5: "X_intersection"

# Field Mask Node Parameters
field_mask_node:
  ros__parameters:
    # ROS2 configuration
    img_topic: "/camera/image_raw" # Input image topic (same as YOLO node)
    frame_id: "camera_optical_frame" # Frame ID for published messages
    
    # HSV thresholds for green field detection
    h_min: 35                     # Hue minimum (green range)
    h_max: 85                     # Hue maximum
    s_min: 50                     # Saturation minimum
    s_max: 255                    # Saturation maximum
    v_min: 50                     # Value minimum
    v_max: 255                    # Value maximum
    
    # Morphological operations for mask cleaning
    morph_kernel_size: 5          # Kernel size for erosion/dilation
    erosion_iterations: 1         # Number of erosion iterations
    dilation_iterations: 2        # Number of dilation iterations
    
    # Output configuration
    compression_quality: 90       # JPEG compression quality for mask

# Hardware-specific presets
hardware_presets:
  # Jetson Nano 4GB
  jetson_nano:
    imgsz: 416
    conf: 0.35
    max_det: 50
    h_min: 35
    h_max: 85
    
  # Jetson Xavier/Orin
  jetson_xavier_orin:
    imgsz: 640
    conf: 0.3
    max_det: 100
    h_min: 30
    h_max: 90

# Camera configuration
camera:
  ros__parameters:
    # Logitech C930 default settings
    device: "/dev/video0"
    width: 640
    height: 480
    framerate: 30.0
    pixel_format: "yuyv"
    
    # Camera info (placeholder - run camera_calibration for real values)
    camera_info_url: "package://wbk_yolo/config/camera_info.yaml"

# Performance monitoring
performance:
  ros__parameters:
    fps_log_interval: 30          # Log FPS every N frames
    enable_profiling: false       # Enable detailed performance profiling
    
# Debug settings
debug:
  ros__parameters:
    enable_debug_image: true      # Publish debug image with bounding boxes
    enable_detection_visualization: true # Visualize detections on debug image
    log_detection_count: true     # Log number of detections per frame
